# ๐ฐ Telegram WOL + Router + Traffic Bot  
ะฃะผะฝัะน Telegram-ะฑะพั ะดะปั ะดะพะผะฐัะฝะตะณะพ ัะตัะฒะตัะฐ ะธ OpenWrt ัะพััะตัะฐ.

---
ะญัะพั ะฟัะพะตะบั ัะพะทะดะฐะฝ ะผะฝะพะน ะฟัะธ ะฟะพะผะพัะธ ChatGPT, ะบะฐะบ ัะฟะพัะพะฑ ะฐะฒัะพะผะฐัะธะทะธัะพะฒะฐัั ะดะพะผะฐัะฝัั ะธะฝััะฐััััะบัััั.
ะฏ ะฝะต ะฟัะพัะตััะธะพะฝะฐะปัะฝัะน ัะฐะทัะฐะฑะพััะธะบ, ะฝะพ ะฟัะพะตะบั ะฒัะฟะพะปะฝัะตั ัะฒะพั ะทะฐะดะฐัั ะธ ะพัะบััั ะดะปั ะธะทััะตะฝะธั.
---
## ๐ ะะพะทะผะพะถะฝะพััะธ

โ ะะบะปััะตะฝะธะต ัะตัะฒะตัะฐ ัะตัะตะท **Wake-on-LAN**  
โ ะัะบะปััะตะฝะธะต ัะตัะฒะตัะฐ ัะตัะตะท **SSH**  
โ ะะตัะตะทะฐะณััะทะบะฐ ัะพััะตัะฐ OpenWrt  
โ ะกะฑะพั ะธะฝัะตัะฝะตั-ััะฐัะธะบะฐ ะฒัะตั ััััะพะนััะฒ ัะตัะตะท **conntrack**  
โ ะะฒัะพะผะฐัะธัะตัะบะพะต ะดะพะฑะฐะฒะปะตะฝะธะต ะฝะพะฒัั ััััะพะนััะฒ  
โ ะขัะฐัะธะบ:
  - ะทะฐ ัะตะณะพะดะฝั  
  - ะทะฐ ะฒัะตัะฐ  
  - ะทะฐ ัะตะบััะธะน ะผะตััั  
  - ะทะฐ ะฟัะพัะปัะต ะผะตัััั (ะฟะตัะตะปะธัััะฒะฐะฝะธะต)  
  - ั ัะฐะทะฑะธะฒะบะพะน ะฟะพ ััััะพะนััะฒะฐะผ  
  - ะธัะพะณ ะทะฐ ะณะพะด  
โ ะฅัะฐะฝะตะฝะธะต ััะฐัะธััะธะบะธ ะดะพ **2 ะปะตั** (ะฐะฒัะพ-ะพัะธััะบะฐ)  
โ ะะพะปะฝะพัััั ะบะฝะพะฟะพัะฝัะน ะธะฝัะตััะตะนั  
โ ะะฒัะพ-ัะดะฐะปะตะฝะธะต ััะฐััั ัะพะพะฑัะตะฝะธะน  
โ ะะฒัะพะผะฐัะธัะตัะบะธะต **ะพะฑะฝะพะฒะปะตะฝะธั ัะตัะตะท GitHub Releases**

---

# ๐ก ะกัะตะผะฐ ัะฐะฑะพัั

```arduino

          โโโโโโโโโโโโโโโโโโโโโโโโโโโโ
          โ       Telegram Bot       โ
          โ                          โ
          โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโ
                         โ
          SSH/WOL/       โ        HTTPS API
        Traffic DB       โ
                         โผ
      โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
      โ            OpenWrt              โ
      โ โ conntrack ััะฐัะธััะธะบะฐ ััะฐัะธะบะฐ  โ
      โ โ reboot ะฟะพ SSH                 โ
      โโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโ
                          โ
                          โ WOL ะฟะฐะบะตั
                          โผ
          โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
          โ         OMV Server         โ
          โ โ ะฒะบะปััะตะฝะธะต WOL            โ
          โ โ ะฒัะบะปััะตะฝะธะต SSH           โ
          โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

# ๐ฆ ะฃััะฐะฝะพะฒะบะฐ
```bash
curl -fsSL https://raw.githubusercontent.com/m33ph/wol_bot/main/install.sh | sudo bash
```
ะฃััะฐะฝะพะฒัะธะบ:

ัะฟัะพัะธั ะบะปััะธ ะธ IP-ะฐะดัะตัะฐ

ัะพะทะดะฐัั ะฒะธัััะฐะปัะฝะพะต ะพะบััะถะตะฝะธะต

ัััะฐะฝะพะฒะธั ะทะฐะฒะธัะธะผะพััะธ

ัะพะทะดะฐัั ัะฐะนะป wol.env

ัะพะทะดะฐัั systemd-unit

ะทะฐะฟัััะธั ะฑะพัะฐ

# ะฃะดะฐะปะตะฝะธะต:

```bash
curl -fsSL https://raw.githubusercontent.com/m33ph/wol_bot/main/uninstall.sh | sudo bash
```

# ะะฑะฝะพะฒะปะตะฝะธะต:

```bash
curl -fsSL https://raw.githubusercontent.com/m33ph/wol-bot/main/update.sh | sudo bash
```

๐ ะะฐัััะพะนะบะธ OpenWrt
ะะตะพะฑัะพะดะธะผัะน ะดะพัััะฟ ะฟะพ SSH
ะะพั ะธัะฟะพะปัะทัะตั:

conntrack -L ะดะปั ัะฑะพัะฐ ััะฐัะธะบะฐ

reboot ะดะปั ะฟะตัะตะทะฐะณััะทะบะธ

ะะพััะพะผั:

ะะบะปััะธัะต SSH ะฝะฐ ัะพััะตัะต

ะะพะฑะฐะฒััะต ะบะปัั ะฟะพะปัะทะพะฒะฐัะตะปั (ะพะฑััะฝะพ root)

ะฃะฑะตะดะธัะตัั, ััะพ ัะฐะฑะพัะฐะตั ะบะพะผะฐะฝะดะฐ:

```bash
ssh -i ~/.ssh/router_key root@192.168.1.1 "conntrack -L"
```
๐ ะะฐะบ ัะฐะฑะพัะฐะตั ัะฑะพั ััะฐัะธะบะฐ
ะะพั ะฟะพะดะบะปััะฐะตััั ะฟะพ SSH ะบะฐะถะดัะต N ัะตะบัะฝะด:

```perl
conntrack -L -o extended | grep "192.168.1."
```
ะะฐััะธั ะบะฐะถะดัั ัััะพะบั:

src, dst

bytes

ะฝะฐะฟัะฐะฒะปะตะฝะธะต (in/out)

ััะผะผะธััะตั ะฒ SQLite ะะ

ะะฐะท ะฒ ัััะบะธ ัะดะฐะปััััั ะดะฐะฝะฝัะต ััะฐััะต 2 ะปะตั.

๐ ะัะธะผะตัั ะธะฝัะตััะตะนัะฐ
ะะปะฐะฒะฝะพะต ะผะตะฝั:
```Copy code
๐ฅ ะะบะปััะธัั ัะตัะฒะตั     โน ะัะบะปััะธัั ัะตัะฒะตั
๐ ะะตัะตะทะฐะณััะทะธัั ัะพััะตั
๐ ะขัะฐัะธะบ
๐ ะฃัััะพะนััะฒะฐ    ๐ ะะพะณะธ
```
ะกัะฐัะธััะธะบะฐ:
```makefile
๐ ะขัะฐัะธะบ โ ะะฐัั 2025

ะกะตะณะพะดะฝั:
โข 192.168.1.150 โ 1.2 GB
โข 192.168.1.50  โ 650 MB

ะัะตะณะพ ัะตะณะพะดะฝั: 1.8 GB
ะัะตัะฐ: 2.1 GB
ะะตััั: 68.1 GB
ะะพะด: 205.3 GB
ะัะพัะผะพัั ะฟัะพัะปัั ะผะตัััะตะฒ:
ะะฝะพะฟะบะธ: โฌ ะะฐะทะฐะด | โก ะะฟะตััะด | ๐งน ะัะธััะธัั | ๐ ะะฑะฝะพะฒะธัั
```
๐ ะะฒัะพะพะฑะฝะพะฒะปะตะฝะธะต ัะตัะตะท GitHub Releases
ะ ัะตะฟะพะทะธัะพัะธะน ะฒะบะปัััะฝ ัะบัะธะฟั:

```pgsql
update.sh
```
ะะฝ:

ะัะพะฒะตััะตั ะฟะพัะปะตะดะฝัั ะฒะตััะธั ัะตัะตะท GitHub API

ะกะบะฐัะธะฒะฐะตั ะฐััะธะฒ

ะััะฐะฝะฐะฒะปะธะฒะฐะตั ะฑะพัะฐ

ะะฑะฝะพะฒะปัะตั ัะฐะนะปั (ะบัะพะผะต wol.env)

ะะฐะฟััะบะฐะตั ะฑะพัะฐ ะพะฑัะฐัะฝะพ
